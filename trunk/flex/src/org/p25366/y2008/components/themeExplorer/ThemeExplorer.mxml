<?xml version="1.0" encoding="utf-8"?>

<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" autoLayout="true" width="100%">
	<mx:Script>
		<![CDATA[
			import org.p25366.y2008.business.Delegate;
			import mx.controls.Alert;
			import org.p25366.y2008.vo.SubkeyVO;
			import org.p25366.y2008.vo.WordsVO;
			import org.p25366.y2008.vo.KeyVO;
			import org.p25366.y2008.vo.KeyVO;
			import mx.events.ListEvent;
			
			import org.p25366.y2008.components.themeExplorer.controler.ThemeExplorerControler;
			import org.p25366.y2008.event.ProjectEvents;
			import org.p25366.y2008.model.Model;
			
			[Bindable]
			public var themeExplorerControler:ThemeExplorerControler = new ThemeExplorerControler();
			
			[Bindable]
			private var model:Model = Model.getInstance();
			 
			private var delegate:Delegate;
			
			private function selectKey(event:Event):void
			{
				var keyVO:KeyVO = themeExplorer.selectedItem as KeyVO;
				model.keyVO = keyVO;
				if (keyVO.children.length == 0){
					delegate = new Delegate();
					delegate.loadSubkeys(keyVO);
				}
			}
			
			private function selectSubkey(event:Event):void
			{
				var subkeyVO:SubkeyVO = subthemesList.selectedItem as SubkeyVO;
				model.subkeyVO = subkeyVO;
				if (subkeyVO.children.length == 0){
				delegate = new Delegate();
				delegate.loadWords(subkeyVO);
				}
			}
			
			private function selectWord(event:Event):void
			{
				var wordsVO:WordsVO = wordsList.selectedItem as WordsVO;
				model.wordsVO = wordsVO;
				delegate = new Delegate();
				delegate.loadWord(wordsVO);
			}
		]]>
	</mx:Script>
	<mx:TileList 
		id = "themeExplorer"
		rowCount="1"
		columnCount="25"
		visible="{model.keyVO==null}"
		direction="horizontal"
		styleName="themeExplorerList"
		itemClick="selectKey(event)"
		dataProvider="{model.keys}"
		itemRenderer="org.p25366.y2008.view.KeyItemRenderer"
	/>
	<mx:HBox 
		visible="{model.keyVO!=null}"
		width="100%" 
		height="100%"
		>
			<mx:TileList 
				id = "themeExplorerVertical"
				rowCount="25"
				width="200"
				columnCount="1"
				backgroundAlpha="0"
				direction="vertical"
				styleName="themeExplorerList"
				click="selectKey(event)"
				dataProvider="{model.keys}" 
				itemRenderer="org.p25366.y2008.view.HorizontalKeyItemRenderer"
				horizontalScrollPolicy="off"
				verticalScrollPolicy="off"
				columnWidth="200"
				rowHeight="90"
			/>
			
			<mx:List 
				id = "subthemesList"
				styleName="themeExplorerList"
				click="selectSubkey(event);"
				dataProvider="{model.keyVO.children}" 
				horizontalScrollPolicy="off"
				itemRenderer="org.p25366.y2008.view.SubkeyItemRenderer"
			/>
				
			<mx:List 
				id = "wordsList"
				visible="{model.subkeyVO!=null}"
				styleName="themeExplorerList"
				click = "selectWord(event);"
				dataProvider="{model.subkeyVO.children}" 
				itemRenderer="org.p25366.y2008.view.WordsItemRenderer"
				horizontalScrollPolicy="off"
			/>
	</mx:HBox>
</mx:Canvas>
