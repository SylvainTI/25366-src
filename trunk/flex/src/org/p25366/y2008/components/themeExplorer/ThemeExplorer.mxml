<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml"  creationComplete="init(event) ">
	<mx:Script>
		<![CDATA[
			import org.p25366.y2008.event.ProjectEvents;
			import org.p25366.y2008.model.Model;
			import org.p25366.y2008.components.themeExplorer.model.ThemeExplorerModel;
			//import com.carlcalderon.arthropod.Debug;
			
			[Bindable]
			private var themeExplorerModel:ThemeExplorerModel = ThemeExplorerModel.getInstance();
			
			private function init( event : Event ) : void{
				currentState = "themes";
				this.themeExplorerModel.openSection("themes");
			}
			
			private function onThemeSelected( event : Event ) : void {
				this.themeExplorerModel.openSection("subthemes",event.target.selectedItem.id);
			}	
			
			private function onItemSelected( event : Event ) : void{
				wordsList.visible = true;
				Model.getInstance().defPageVisible = false;		
				this.themeExplorerModel.openSection("words",subthemesList.selectedItem.id);
			}		
			
			private function onWordSelected( event : Event ) : void {
				Model.getInstance().defPageVisible = true;		
				var event2:ProjectEvents = new ProjectEvents(ProjectEvents.OPEN_PAGE);
				event2.wordId = subthemesList.selectedItem.id;
				Model.getInstance().dispatchEvent(event2);
			}
			
		]]>
	</mx:Script>
	<mx:HBox id="hbox" left="20">
	</mx:HBox>
	<mx:states>
	<mx:State name="themes">
		<mx:AddChild relativeTo="{hbox}">
			<mx:HorizontalList 
					styleName="themeExplorerList"
					click="onThemeSelected(event)"
					dataProvider="{this.themeExplorerModel.themes_arr}" 
					itemRenderer="org.p25366.y2008.view.KeyItemRenderer"
					x="10" 
					y="10"
			/>
		</mx:AddChild>
	</mx:State>
	<mx:State name="subthemes">
	<mx:AddChild relativeTo="{hbox}">
				<mx:List
					id = "subthemesList"
					styleName="themeExplorerList"
					click="onItemSelected(event)"
					dataProvider="{this.themeExplorerModel.subthemes_arr}" 
					itemRenderer="org.p25366.y2008.view.SubkeyItemRenderer"
					x="10" 
					y="10" 
					/>
					
				
	</mx:AddChild>
	</mx:State>
	<mx:State name="words">
	<mx:AddChild relativeTo="{hbox}">
		<mx:List 
					id = "wordsList"
					styleName="themeExplorerList"
					click = "onWordSelected(event);"
					dataProvider="{this.themeExplorerModel.words_arr}" 
					itemRenderer="org.p25366.y2008.view.WordsItemRenderer"
					x="10" 
					y="10" 
					/>
	</mx:AddChild>
	</mx:State>
	</mx:states>
</mx:Canvas>
