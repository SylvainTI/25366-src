<?xml version="1.0"?>
<mx:Application 
	backgroundColor="0xffffff"
	creationComplete="init()" 
	layout="absolute"
	xmlns:mx="http://www.adobe.com/2006/mxml"
	xmlns:historicalMarks="org.p25366.y2008.components.historicalMarks.*" 
	xmlns:searchResults="org.p25366.y2008.components.searchResults.*"
	xmlns:themeExplorer="org.p25366.y2008.components.themeExplorer.*" 
	xmlns:definitionPage="org.p25366.y2008.components.definitionPage.*"
	>
	<mx:Script>
		<![CDATA[
		/* Samedi : 02:20 (Mouhahahah) Anthony dit : Je me suis permis de rajouter => themeId="1"  ,dans mon composant que tu instancies ici, 
		en fait tu pourras faire du data-binding à la place du 1, il me faut l'Id du theme selectionné. Merci */

			import mx.rpc.events.ResultEvent;
			import mx.rpc.http.HTTPService;
			
			import org.p25366.y2008.vo.KeyVO;
			import org.p25366.y2008.model.Model;
			
			[Bindable]
			public var model:Model = Model.getInstance();
			public var httpService:HTTPService;
			public function init():void
			{
				httpService = new HTTPService();
				httpService.url = "data/keys.xml";
				httpService.resultFormat = HTTPService.RESULT_FORMAT_E4X;
				httpService.addEventListener(ResultEvent.RESULT, result);
				httpService.send();
			}
			public function result(data:Object):void
			{
				trace("yeah");
			}
			public function determineLangSource(event:Event):void
			{
				if(event.currentTarget.selectedItem.data == "fr-fra"){
				model.langDest = "zh-zho";
				}else {
				model.langDest = "fr-fra";
				}
				model.langSource = event.currentTarget.selectedItem.data;
			}	
			
			public function determineLangDest(event:Event):void
			{
				model.langDest=event.currentTarget.selectedItem.data;
			}			
			
		]]>
	</mx:Script>
	<mx:Style source="org/p25366/y2008/style/style.css" />
	<mx:Image 
		source="@Embed('org/p25366/y2008/style/assets/logo25366.png')" 
		verticalCenter="0"
		left="100"
		visible="{model.page=='choixLangue'}"
		/>
		
	<mx:Canvas 
		id="choixLangue"
		visible="{model.page=='choixLangue'}"
		width="100%"
		height="100%"
		>
		
		<mx:Text
			width="200"
			left="250"
			verticalCenter="-100"
			>
            <mx:text>
                Pour entrer, choisissez une langue source et une langue cible en cliquant sur les champs ci-dessous
            </mx:text>
        </mx:Text>
            
		<mx:List
			id="langSource"
			height="100"
			left="250"
			verticalCenter="0"
			change="determineLangSource(event)"
			borderSides=""
			cornerRadius="10"
			>
	            <mx:Object label="français" data="fr-fra"/>
	            <mx:Object label="chinois" data="zh-zho"/>
        	
		</mx:List>
		
		<mx:List
			id="langDest"
			height="100"
			left="325"
			verticalCenter="0"
			change="determineLangDest(event)"
			borderSides=""
			cornerRadius="10"
			>
	            <mx:Object label="français" data="fr-fra"/>
	            <mx:Object label="chinois" data="zh-zho"/>
        	
		</mx:List>
		
		<mx:Button 
			label="Choix"
			click="model.page='home'"
			verticalCenter="0"
			left="400"
			/>
	</mx:Canvas>
	
	<mx:Canvas 
		id="langueChoisie"
		visible="{model.page!='choixLangue'}"
		width="100%"
		height="100%"
		>
		<mx:Image 
		source="@Embed('org/p25366/y2008/style/assets/logo25366.png')" 
		top="0"
		left="100"
		/>
		<mx:TabBar 
			dataProvider="{viewStack}"
			top="80" 
			/>
		<mx:ViewStack
			id="viewStack"
			top="150"
			height="70%"
			width="70%"
			>
			<historicalMarks:HistoricalMarks label="Historical Marks"/>
			<mx:HBox	label="Theme Explorer And Definition Page">
			<themeExplorer:ThemeExplorer 
				id = "themeExplorer"
				/>
			<definitionPage:DefinitionPage 
				id = "definitionPage"
				visible = "{model.defPageVisible}"
				/>
				</mx:HBox>
		</mx:ViewStack>
		<mx:TextInput 
			id="searchTextInput" 
			right="20"
			top="20"
			/>
		<searchResults:SearchResult 
			label="Search Result"
			word="{searchTextInput.text}"
			visible="{searchTextInput.text!=''}"
			width="500"
			height="400"
			right="20"
			top="50"
			showEffect="{wipeDown}"
			hideEffect="{wipeUp}"
			/>
	</mx:Canvas>
	
	<mx:WipeDown id="wipeDown" />
	<mx:WipeUp id="wipeUp" />

</mx:Application> 